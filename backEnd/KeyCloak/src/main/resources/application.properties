spring.application.name=keycloak-auth
server.port=8079

# Eureka
eureka.client.service-url.defaultZone=http://localhost:8420/eureka
eureka.client.register-with-eureka=true

# Keycloak server (run Keycloak separately - see README; must be Keycloak's URL, not this service's port)
# NOTE: The API Gateway is already configured to validate tokens against
# http://localhost:8421/realms/smart-freelance, so we point the auth service
# to the same Keycloak base URL to avoid mismatched hosts/ports.
keycloak.auth-server-url=http://localhost:8080
keycloak.realm=smart-freelance
keycloak.resource=smart-freelance-backend
keycloak.credentials.secret=PpZuiHLBeLfl3xsxaQsmBDjT9nYgfoJE

# Keycloak Admin API (for user registration). If admin-cli has "Client authentication" ON, set client-secret.
keycloak.admin.realm=master
keycloak.admin.client-id=admin-cli
keycloak.admin.client-secret=Vpa9TwXFx82VRyID7xTYsn6w8dhkNSE6
keycloak.admin.username=Endless404
keycloak.admin.password=Ridha404

# Service-to-service secret (same value must be set in User microservice for sync delete/update)
keycloak.service-secret=${KEYCLOAK_SERVICE_SECRET:smart-freelance-internal-secret}

# OAuth2 Resource Server: validate JWT from Keycloak
spring.security.oauth2.resourceserver.jwt.issuer-uri=${keycloak.auth-server-url}/realms/${keycloak.realm}
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${keycloak.auth-server-url}/realms/${keycloak.realm}/protocol/openid-connect/certs

# Actuator (health for Eureka)
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized

# OpenAPI
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
